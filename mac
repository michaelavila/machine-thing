MACRC_PATH="$(cd "$(dirname "$0")"; pwd -P)" # the location of this script
MACRC_LIB="$MACRC_PATH/lib"                  # things used by macrc
MACRC_MODULES="$MACRC_PATH/modules"          # modularized setups

source "$MACRC_LIB/utils.sh"

# ensure that a module is installed and
# configured to be used
#
module() {
  echo "module $1"
  local module_path="$MACRC_MODULES/$1"
  [ -d "$MACRC_MODULES" ]       || fail "no modules at $MACRC_MODULES"
  [ -d "$module_path" ]    || fail "module $MACRC_MODULES/$1 does not exist!"
  pushd "$module_path"
  [ -x install ] && ./install || echo 'Nothing to install (or install file not executable)'
  popd
}

# to setup the machine, list the modules that apply

module 'homebrew'
